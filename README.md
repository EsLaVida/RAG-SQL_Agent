# ü§ñ AI SQL Analyst (LangGraph + MiMo-V2 + Devstral + Langfuse)

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ observability. –°–ø–æ—Å–æ–±–Ω–∞ –∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —Å–∞–º–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –∏ –≥–ª—É–±–æ–∫–æ–º—É –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É –≤—ã–≤–æ–¥—É. –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–∞—Å–∫–∞–¥–Ω—É—é –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é.



## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –ö–∞—Å–∫–∞–¥ –º–æ–¥–µ–ª–µ–π

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö —á–∞—Ç-–±–æ—Ç–æ–≤, –≤ –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (**Separation of Concerns**):

* **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (Xiaomi MiMo-V2-Flash):** "–ú–æ–∑–≥" —Å–∏—Å—Ç–µ–º—ã. –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ (309B MoE) –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ü–µ–ø–æ—á–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
* **–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä—ã (Mistral Devstral-2512):** –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–¥–∏–Ω–≥–∞. –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞" —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π `0.0`.
    * **Validator**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ SQLite –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å).
    * **Optimizer**: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ JOIN, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –ø–æ–ª–Ω–æ—Ç—ã –¥–∞–Ω–Ω—ã—Ö).

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* **üîÑ Self-Correction Loop**: –ï—Å–ª–∏ Devstral –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫—É –∏–ª–∏ —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `LEFT JOIN`), –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π `feedback`. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ–±—è–∑–∞–Ω —É—á–µ—Å—Ç—å –µ–≥–æ –∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –¥–æ –ø–æ–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
* **üìö In-Context Learning (Few-Shot)**: –í—Å–µ –∞–≥–µ–Ω—Ç—ã –æ–±—É—á–µ–Ω—ã –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º –ø–æ–Ω–∏–º–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `company.db` (—Å–≤—è–∑–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤, –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞—Ä–ø–ª–∞—Ç).
* **üõ°Ô∏è Human-in-the-loop**: –ü—Ä–∏–Ω—Ü–∏–ø –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî SQL-–∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ —è–≤–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
* **üèóÔ∏è Modular Prompt Engineering**: –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `prompts.py`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ –≥—Ä–∞—Ñ–∞.
* **üìä Full Observability**: –ö–∞–∂–¥—ã–π —à–∞–≥ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Langfuse ‚Äî –æ—Ç LLM –≤—ã–∑–æ–≤–æ–≤ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL, —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é.
* **üîç Production-Ready Monitoring**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ latency, —Ç–æ–∫–µ–Ω–æ–≤, –æ—à–∏–±–æ–∫ –∏ cost tracking –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **LangGraph**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º —Ü–∏–∫–ª–∏—á–Ω—ã–º –≥—Ä–∞—Ñ–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π.
* **OpenRouter API**: –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–∞ –∫ SOTA-–º–æ–¥–µ–ª—è–º MiMo –∏ Devstral.
* **LangChain**: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å LLM, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.
* **Langfuse**: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ observability –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ LLM-—Ç—Ä–µ–π—Å–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
* **SQLite**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–ª–æ–∂–Ω—ã—Ö Enterprise-—Å–≤—è–∑–µ–π.
* **Docker Compose**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (PostgreSQL, ClickHouse, Redis, MinIO).



## üìä –¶–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

1.  **Natural Language Input**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: *"–ö—Ç–æ –∏–∑ IT –Ω–µ –∑–∞–Ω—è—Ç –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö?"*
2.  **Schema Exploration**: –ê–≥–µ–Ω—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `get_db_schema` –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü.
3.  **SQL Generation**: MiMo-V2 –ø–∏—à–µ—Ç –ø–µ—Ä–≤–∏—á–Ω—ã–π SQL –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º—ã.
4.  **Multi-Stage Inspection**:
    * –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.
    * –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ø—Ä–∞–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `IS NULL`).
5.  **Refinement**: –ê–≥–µ–Ω—Ç –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ `feedback`.
6.  **Confirmation**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π SQL –∏ –¥–∞–µ—Ç `OK`.
7.  **Execution & Insights**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
git clone [https://github.com/your-username/ai-sql-analyst.git](https://github.com/your-username/ai-sql-analyst.git)
cd ai-sql-analyst
python -m venv venv
source venv/bin/activate  # –î–ª—è Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Langfuse
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Langfuse
git clone https://github.com/langfuse/langfuse.git
cd langfuse

# –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker-compose up -d

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
# http://localhost:3000
# –õ–æ–≥–∏–Ω: admin@example.com / password123
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π
–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Langfuse –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ `.env`:
```env
OPENAI_API_KEY=your_openai_key
LANGFUSE_HOST="http://localhost:3000"
LANGFUSE_SECRET_KEY=sk-lf-your_secret_key
LANGFUSE_PUBLIC_KEY=pk-lf-your_public_key
```

### 4. –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞
```bash
cd ..  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
python app.py
```

–ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤—Å–µ —Ç—Ä–µ–π—Å—ã –≤ Langfuse –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

## üìä Observability –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Langfuse)

### üîç –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö:

* **LLM Calls**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ MiMo-V2 –∏ Devstral —Å —Ç–æ–∫–µ–Ω–∞–º–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∏ latency
* **SQL Generation**: –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤–∫–ª—é—á–∞—è —Å–∞–º–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—é
* **Tool Execution**: –í—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ `get_db_schema`, `user_confirmation`, `execute_sql`
* **Graph Traversals**: –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —É–∑–ª–∞–º LangGraph (assistant ‚Üí validator ‚Üí optimizer)
* **Error Handling**: –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üéØ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ Langfuse Interface
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ http://localhost:3000 –¥–æ—Å—Ç—É–ø–Ω—ã:

* **Traces**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
* **Sessions**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç—Ä–µ–π—Å–æ–≤ –ø–æ —Å–µ—Å—Å–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* **Analytics**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
* **Cost Tracking**: –†–∞—Å—Ö–æ–¥—ã –Ω–∞ API –≤—ã–∑–æ–≤—ã –ø–æ –º–æ–¥–µ–ª—è–º
* **Error Analysis**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ SQL

### üìà –ü—Ä–∏–º–µ—Ä —Ç—Ä–µ–π—Å–∞ –≤ Langfuse
```
Session: "–ê–Ω–∞–ª–∏–∑ IT-–æ—Ç–¥–µ–ª–∞"
‚îú‚îÄ‚îÄ Assistant (MiMo-V2) - 2.3s, $0.0012
‚îú‚îÄ‚îÄ Validator (Devstral) - 1.1s, $0.0008 ‚úÖ
‚îú‚îÄ‚îÄ Optimizer (Devstral) - 1.5s, $0.0010 üí°
‚îú‚îÄ‚îÄ Tool: get_db_schema - 0.1s
‚îú‚îÄ‚îÄ Tool: user_confirmation - 0.2s
‚îî‚îÄ‚îÄ Tool: execute_sql - 0.3s
```

### üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cd langfuse && docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å —á–∏—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
cd langfuse && docker-compose down -v && docker-compose up -d
```

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –∫–∞—Å–∫–∞–¥–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏. –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```text
üë§ –í—ã: "–ü–æ–∫–∞–∂–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ IT-–æ—Ç–¥–µ–ª–∞, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–∞–¥ –±–æ–ª–µ–µ —á–µ–º –æ–¥–Ω–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º"

üõ°Ô∏è [DEVSTRAL VALIDATOR]: ‚úÖ SQL –ø—Ä–æ–≤–µ—Ä–µ–Ω, –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ.
üöÄ [DEVSTRAL OPTIMIZER]: –î–∞–ª —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é. –í–æ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–ø—Ä–æ—Å–∞:
   "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ e.id –∏ —Ñ–∏–ª—å—Ç—Ä HAVING COUNT > 1 –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞."

ü§ñ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: –Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Å—Ç–∞–≤–∏–ª –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –≤ IT-–æ—Ç–¥–µ–ª–µ.

–ó–∞–ø—Ä–æ—Å: 
SELECT e.name, COUNT(pa.project_id) as project_count 
FROM employees e 
JOIN project_assignments pa ON e.id = pa.emp_id 
WHERE e.dep_id = 1 
GROUP BY e.id 
HAVING project_count > 1;

–í—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å? (y/n):
üë§ –í—ã: y

üõ°Ô∏è [SYSTEM]: –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ user_confirmation... –°—Ç–∞—Ç—É—Å: True.
üì° [SYSTEM]: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–∞ –≤ company.db... –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω.

ü§ñ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: **–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:**

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤ IT-–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å—Ä–∞–∑—É –Ω–∞–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏:

1. **–ê–ª–µ–∫—Å–µ–π (ID: 12)** ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω –≤ **3 –ø—Ä–æ–µ–∫—Ç–∞—Ö**. 
2. **–ú–∞—Ä–∏—è (ID: 45)** ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∞ –≤ **2 –ø—Ä–æ–µ–∫—Ç–∞—Ö**.

–≠—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–º–µ—é—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É. –û—Å—Ç–∞–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã –∑–∞–Ω—è—Ç—ã –Ω–µ –±–æ–ª–µ–µ —á–µ–º –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ. –ù—É–∂–Ω–∞ –ª–∏ –≤–∞–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º?üë§ –í—ã: y

üõ°Ô∏è [SYSTEM]: –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ user_confirmation... –°—Ç–∞—Ç—É—Å: True.
üì° [SYSTEM]: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–∞ –≤ company.db... –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω.

ü§ñ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: **–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:**

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤ IT-–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å—Ä–∞–∑—É –Ω–∞–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏:

1. **–ê–ª–µ–∫—Å–µ–π (ID: 12)** ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω –≤ **3 –ø—Ä–æ–µ–∫—Ç–∞—Ö**. 
2. **–ú–∞—Ä–∏—è (ID: 45)** ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∞ –≤ **2 –ø—Ä–æ–µ–∫—Ç–∞—Ö**.

–≠—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–º–µ—é—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É. –û—Å—Ç–∞–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã –∑–∞–Ω—è—Ç—ã –Ω–µ –±–æ–ª–µ–µ —á–µ–º –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ. –ù—É–∂–Ω–∞ –ª–∏ –≤–∞–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º?


## ü§ù –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (Human-in-the-loop)

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é **–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞**. –ê–≥–µ–Ω—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º –≤ –≤–∞–∫—É—É–º–µ ‚Äî –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ ¬´–≤—Ç–æ—Ä–æ–π –ø–∏–ª–æ—Ç¬ª (Copilot), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ:

### 1. –¢–æ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ª—é–±–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç SQL, –∞ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å ¬´–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∫—É—Ö–Ω–∏¬ª:
* **–≠—Ç–∞–ø –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –í—ã –≤–∏–¥–∏—Ç–µ –≤–µ—Ä–¥–∏–∫—Ç **Devstral** –ø–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É.
* **–≠—Ç–∞–ø –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–≤–µ—Ç—ã –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º –∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º JOIN).
* **–§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π SQL-–∫–æ–¥ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π (–≤ –∫–æ–Ω—Å–æ–ª–∏), —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –µ–≥–æ –ø—Ä–æ–∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.

### 2. –°—Ç—Ä–æ–≥–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `user_confirmation`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
* –ê–≥–µ–Ω—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å `company_sql`, –ø–æ–∫–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≥—Ä–∞—Ñ–∞ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è —Ñ–ª–∞–≥ –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≥–∏–±–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: —Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ `y/n`, –Ω–æ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤—Ä–æ–¥–µ ¬´–î–∞¬ª, ¬´–û–∫¬ª, ¬´–ü–æ–≥–Ω–∞–ª–∏¬ª –∏–ª–∏ ¬´–û—Ç–º–µ–Ω—è–π¬ª.

### 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ (Refinement Loop)
–ï—Å–ª–∏ –≤—ã –æ—Ç–∫–ª–æ–Ω—è–µ—Ç–µ –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –≤–≤–æ–¥–∏—Ç–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ, –∞–≥–µ–Ω—Ç –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É, –∞ –≤—Ö–æ–¥–∏—Ç –≤ —Ü–∏–∫–ª –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç–∞:
* **–ü—Ä–∏–º–µ—Ä**: –í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ: *"–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö, –æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ —Ç–æ–ø-5"*.
* **–†–µ–∞–∫—Ü–∏—è**: –ê–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –¥–æ–±–∞–≤–ª—è–µ—Ç `LIMIT 5` –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É SQL –∏ —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ —Ü–∏–∫–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
* –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ ¬´–¥–æ–∫—Ä—É—á–∏–≤–∞—Ç—å¬ª —Å–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç –ø—Ä–æ—Å—Ç—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏.



### 4. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —Å—É—Ö–∏—Ö —Ç–∞–±–ª–∏—Ü
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç¬ª –∏—Ö –≤ –∫–æ–Ω—Å–æ–ª—å. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å Senior-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞:
* –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.
* –í—ã–¥–µ–ª—è–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏ –∏–ª–∏ –≤–∞–∂–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–∞–º—ã–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –æ—Ç–¥–µ–ª).
* –§–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–º —è–∑—ã–∫–µ, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —Ç–æ—á–Ω–æ—Å—Ç—å —Ü–∏—Ñ—Ä –∏–∑ –ë–î.

> **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –º–æ—â—å SQL-–¥–≤–∏–∂–∫–∞ –±–µ–∑ —Ä–∏—Å–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–≤–µ—Ä–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∏–∫–µ LLM. –í—ã –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç–µ—Å—å ¬´–ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–ª–µ–π¬ª –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π.